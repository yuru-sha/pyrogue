---
cache_control: {"type": "ephemeral"}
---
# PyRogue - ゲームデザインドキュメント（GDD）

## ドキュメント概要

このドキュメントは、PyRogueプロジェクトのゲームデザインを包括的に記述するゲームデザインドキュメント（Game Design Document, GDD）です。ゲームの全体的なビジョン、コアメカニクス、プレイヤー体験、バランス設計について詳述します。

## 1. ゲームビジョン

### 1.1 コンセプト

PyRogueは、**「オリジナルRogueの魂を現代技術で蘇らせる」**ことを目指したローグライクゲームです。1980年代のクラシックなゲーム体験を、現代のソフトウェア品質基準と開発手法で実現します。

### 1.2 ゲームの核心体験

#### プレイヤーに提供したい体験
- **永続的な緊張感**: パーマデスによる真剣な意思決定
- **探索の魅力**: 未知の階層への好奇心と発見の喜び
- **戦略的思考**: 限られたリソースでの最適戦略の構築
- **成長の実感**: プレイヤーとキャラクターの同時成長

#### ゲームのトーン
- **クラシックな雰囲気**: オリジナルRogueへの敬意
- **現代的な洗練**: 快適なUI/UXと高い品質
- **教育的価値**: ゲーム開発学習の教材としての価値

### 1.3 ターゲットオーディエンス

#### プライマリターゲット
- **クラシックローグライクファン**: オリジナルRogueの体験を求める層
- **Python学習者**: ゲーム開発を通じてPythonを学びたい開発者

#### セカンダリターゲット
- **ローグライク初心者**: ジャンルの入門として
- **教育関係者**: ソフトウェア設計の教材として
- **オープンソース貢献者**: 高品質プロジェクトへの参加希望者

## 2. コアゲームプレイ

### 2.1 ゲームプレイループ

#### マクロループ（全体の進行）
```
ゲーム開始 → ダンジョン探索 → レベルアップ → 装備強化 → 深層へ降下 → 勝利/死亡
```

#### ミクロループ（1ターンの流れ）
```
プレイヤー行動 → 効果適用 → モンスター行動 → 環境効果 → 状態更新 → 次ターン
```

#### フロアループ（階層探索）
```
階層到着 → マップ探索 → アイテム収集 → モンスター撃破 → 階段発見 → 次階層
```

### 2.2 コアメカニクス

#### 2.2.1 探索メカニクス

**ダンジョン生成**
- **BSPアルゴリズム**: 自然で予測困難なダンジョン配置
- **迷路階層**: 特定階層（7,13,19階）での迷路生成
- **部屋接続**: L字型通路による戦術的移動経路

**視界システム（FOV）**
- **制限された視界**: 戦略的情報管理
- **暗い部屋システム**: 光源による視界変動
- **探索記録**: 既探索エリアの記録と表示

**隠し要素発見**
- **隠し扉**: 探索による発見システム
- **トラップ**: 段階的発見→解除プロセス
- **秘密の報酬**: 探索への動機付け

#### 2.2.2 戦闘メカニクス

**ターンベース戦闘**
- **戦略的思考時間**: プレイヤーに十分な判断時間
- **位置取りの重要性**: マップ地形を活用した戦術
- **リソース管理**: HP/MP/アイテムの戦略的使用

**ダメージ計算**
```
基本ダメージ = 攻撃力 - 防御力（最低1ダメージ保証）
クリティカル = 基本ダメージ × 2（5%確率）
```

**状態異常システム**
- **戦術的影響**: 各状態異常が戦闘に与える影響
- **相互作用**: 複数状態異常の組み合わせ効果
- **カウンタープレイ**: 対策アイテム・魔法の存在

#### 2.2.3 成長メカニクス

**経験値システム**
- **レベル差補正**: レベル差による経験値調整
- **成長実感**: レベルアップ時の明確な能力向上
- **長期目標**: 最終レベルに向けた継続的動機

**装備システム**
- **段階的強化**: より良い装備への段階的アップグレード
- **選択の重み**: 限られたインベントリでの装備選択
- **専門化**: 攻撃特化vs防御特化の戦略選択

#### 2.2.4 リソース管理メカニクス

**インベントリ管理**
- **26文字制限**: 厳格なアイテム管理の必要性
- **重量制限**: 運搬能力による戦略選択
- **装備制限**: 同時装備可能数の制限

**飢餓システム**
- **5段階の飢餓レベル**: 満腹→普通→空腹→飢餓→餓死寸前
- **戦闘能力への影響**: 飢餓による攻撃力・防御力減少
- **食料価値**: 食料アイテムの戦略的重要性

### 2.3 ゲームバランス設計

#### 2.3.1 難易度カーブ

**序盤（1-5階）**
- **学習フェーズ**: 基本操作とメカニクスの理解
- **低リスク**: 初心者に優しい敵配置とトラップ密度
- **基礎装備**: 基本的な武器・防具の獲得

**中盤（6-15階）**
- **戦略構築**: 本格的な戦術の必要性
- **リソース圧迫**: より厳しいリソース管理
- **迷路導入**: 7階での迷路による複雑性増加

**後半（16-26階）**
- **高難易度**: 高レベルモンスターとの激戦
- **完成された戦略**: 装備・魔法・アイテムの総合活用
- **最終決戦**: イェンダーのアミュレット獲得への挑戦

#### 2.3.2 リスク/リワード設計

**探索リスク**
- **トラップ**: 探索の代償としてのダメージ・状態異常
- **モンスター遭遇**: 未探索エリアでの敵遭遇リスク
- **リソース消費**: 探索による時間・食料の消費

**探索リワード**
- **貴重アイテム**: 隠し部屋での特別なアイテム
- **経験値**: モンスター撃破による成長機会
- **戦略的優位**: マップ情報による戦術的有利性

#### 2.3.3 プレイヤーエージェンシー

**意思決定の重要性**
- **装備選択**: 限られたインベントリでの優先順位付け
- **経路選択**: 安全な迂回vs危険な最短経路
- **リソース配分**: HP回復vs MP温存の判断

**プレイヤースキルの発達**
- **マップ読解**: ダンジョン構造の理解
- **敵パターン認識**: モンスターAIの学習
- **リソース最適化**: 効率的なアイテム使用

## 3. ゲーム進行設計

### 3.1 ストーリー進行

#### メインクエスト
```
ダンジョン潜入 → 26階層の探索 → イェンダーのアミュレット発見 → 地上への帰還
```

#### 進行マイルストーン
- **第1段階（1-8階）**: 基本システム習得・装備収集
- **第2段階（9-17階）**: 戦略の洗練・高度なメカニクス活用
- **第3段階（18-26階）**: 最終試練・総合力テスト

### 3.2 プレイヤー誘導設計

#### チュートリアル設計（暗示的学習）
- **段階的メカニクス導入**: 1つずつのシステム理解
- **失敗からの学習**: パーマデスによる真剣な学習促進
- **ヒントシステム**: メッセージによる適切な情報提供

#### フィードバックシステム
- **即座のフィードバック**: 行動の結果を明確に表示
- **進捗の可視化**: レベル・装備・探索率の表示
- **成果の記録**: スコアランキングによる達成感

### 3.3 リプレイアビリティ設計

#### ランダム性の活用
- **手続き生成**: 毎回異なるダンジョン配置
- **アイテム配置**: ランダムな装備・消耗品の配置
- **敵配置**: 予測困難なモンスター配置

#### 戦略バリエーション
- **ビルド多様性**: 魔法使い型vs戦士型の選択
- **プレイスタイル**: 慎重型vs積極型のアプローチ
- **難易度調整**: プレイヤースキルに応じた自然な難易度変化

## 4. ユーザーエクスペリエンス設計

### 4.1 ユーザビリティ原則

#### アクセシビリティ
- **複数入力方式**: Vi-keys、矢印キー、テンキーの包括サポート
- **JIS配列対応**: 日本のユーザーへの配慮
- **視覚的明確性**: 色彩コントラストと明確な区別

#### 学習容易性
- **一貫したインターフェース**: 統一されたキー操作
- **ヘルプの充実**: コンテキストヘルプの提供
- **エラー防止**: 誤操作の防止と適切な警告

#### 効率性
- **ショートカットキー**: 熟練者向けの高速操作
- **情報密度**: 必要な情報の効率的な表示
- **レスポンシブ性**: 即座の反応と快適な操作感

### 4.2 没入感の設計

#### 世界観の一貫性
- **クラシックな雰囲気**: ASCII文字による懐かしさ
- **現代的洗練**: 高品質なUIによる快適性
- **リアリティ**: ゲーム内ルールの一貫性

#### プレイヤーの投影
- **キャラクター成長**: プレイヤーの上達との同期
- **選択の結果**: 意思決定の明確な反映
- **達成感**: 困難克服による満足感

### 4.3 フィードバックシステム

#### 視覚的フィードバック
- **状態の明示**: HP/MP残量の色彩表示
- **選択の明確化**: 現在選択位置のハイライト
- **変化の表示**: 装備変更・状態変化の明示

#### 聴覚的フィードバック（将来実装）
- **効果音**: アクションに対応する音響効果
- **環境音**: ダンジョンの雰囲気を醸成
- **音楽**: ゲーム進行に応じたBGM

#### 触覚的フィードバック（概念的）
- **キー入力の確実性**: 明確な入力応答
- **操作の直感性**: 自然な操作フロー
- **リズム感**: ターンベースの心地良いテンポ

## 5. 技術設計とゲームデザインの統合

### 5.1 アーキテクチャがゲームプレイに与える影響

#### Builder Patternによる恩恵
- **ダンジョンバリエーション**: 新しい生成ルールの追加容易性
- **デバッグ効率**: 特定パターンのテスト生成
- **バランス調整**: パラメータ変更による難易度調整

#### Manager Patternによる恩恵
- **システム独立性**: 各ゲームシステムの独立性
- **機能拡張**: 新機能の既存システムへの影響最小化
- **デバッグ容易性**: 問題の局所化と修正

#### Command Patternによる恩恵
- **操作一貫性**: GUIとCLIでの統一体験
- **テスト自動化**: CLI経由での自動テスト実行
- **アクセシビリティ**: 異なる操作方式での同一機能

### 5.2 パフォーマンスとゲーム体験

#### 描画最適化
- **スムーズな操作感**: 差分描画による高フレームレート
- **視覚的快適性**: FOVベース描画による自然な表示
- **レスポンシブ性**: 入力への即座の反応

#### メモリ効率
- **快適なプレイ**: 遅延読み込みによる軽快な動作
- **長時間プレイ**: メモリリークのない安定動作
- **スケーラビリティ**: 大規模ダンジョンでの安定性

## 6. 品質保証とプレイヤー体験

### 6.1 バグ防止とゲーム体験

#### 包括的テスト
- **信頼性**: 230+のテストによる高い品質
- **予期しない状況の回避**: エッジケースでの適切な動作
- **プレイヤーの期待**: 一貫した動作による信頼性

#### CLI統合テスト
- **実際のゲームフロー**: 19シナリオでの実プレイテスト
- **回帰防止**: 新機能追加時の既存機能保護
- **品質維持**: 継続的な品質管理

### 6.2 プレイヤーサポート

#### デバッグ機能
- **ウィザードモード**: 開発者・上級者向けのデバッグ機能
- **問題解決**: トラブル時の状況把握支援
- **学習支援**: ゲームメカニクスの理解促進

#### エラーハンドリング
- **適切な回復**: エラー時の適切な状況復旧
- **情報提供**: 問題発生時の明確な情報表示
- **ユーザビリティ**: エラーによるプレイ中断の最小化

## 7. 将来のビジョン

### 7.1 継続的進化

#### コミュニティとの協調
- **オープンソース**: コミュニティからの貢献受け入れ
- **フィードバック活用**: プレイヤーからの意見の反映
- **教育的価値**: 学習リソースとしての価値向上

#### 技術的発展
- **モダン技術の活用**: 新しい技術の積極的採用
- **パフォーマンス向上**: 継続的な最適化
- **機能拡張**: 新機能の段階的追加

### 7.2 長期目標

#### ゲーム体験の深化
- **コンテンツ拡張**: 新ダンジョン、モンスター、アイテム
- **システム深化**: より複雑で興味深いメカニクス
- **プレイヤー投稿**: コミュニティ生成コンテンツ

#### 技術的完成度
- **業界標準**: ゲーム開発のベストプラクティス
- **教育的価値**: 大学・専門学校での教材採用
- **オープンソース貢献**: 技術コミュニティへの貢献

## 8. 成功指標

### 8.1 プレイヤー満足度指標

#### ゲーム体験品質
- **プレイ継続率**: プレイヤーの継続的なエンゲージメント
- **完走率**: 最終階層到達者の比率
- **リプレイ率**: 複数回プレイする比率

#### ユーザビリティ
- **学習効率**: 新規プレイヤーの操作習得速度
- **エラー率**: 誤操作や理解不足による問題の頻度
- **満足度**: プレイヤーの総合的な満足度

### 8.2 技術的成功指標

#### 品質指標
- **バグ発生率**: 新機能追加時のバグ発生頻度
- **テストカバレッジ**: 自動テストによる保証範囲
- **パフォーマンス**: フレームレートと応答時間

#### 開発効率指標
- **機能追加速度**: 新機能開発に要する時間
- **保守性**: 既存コードの修正容易性
- **コミュニティ貢献**: 外部開発者からの貢献量

## まとめ

PyRogueのゲームデザインは、**オリジナルRogueの精神を現代技術で実現する**という明確なビジョンの下、以下の設計原則で構築されています：

### 🎯 **コアデザイン原則**
1. **プレイヤーエージェンシー**: 意思決定の重要性と結果の明確性
2. **学習曲線**: 段階的な難易度上昇と自然な学習促進
3. **リスク/リワードバランス**: 適切な挑戦と報酬の組み合わせ
4. **リプレイアビリティ**: 毎回異なる体験の提供

### 🏗️ **技術とデザインの統合**
- **高品質アーキテクチャ**: ゲーム体験を支える堅牢な技術基盤
- **包括的テスト**: 信頼性の高いプレイ体験の保証
- **アクセシビリティ**: 多様なプレイヤーへの配慮

### 🎮 **プレイヤー体験の価値**
- **真のローグライク体験**: パーマデスによる緊張感
- **成長の実感**: プレイヤーとキャラクターの同時成長
- **探索の魅力**: 未知への好奇心と発見の喜び

PyRogueは、単なるゲームプロジェクトではなく、**ゲームデザインとソフトウェア工学のベストプラクティスを統合した総合的な作品**として設計されています。このGDDは、開発チームとコミュニティが共有するビジョンを明文化し、一貫した方向性での継続的発展を可能にします。