# タスクリスト

このドキュメントは、PyRogue開発プロジェクトのタスク管理を行います。

## 完了済み (Done)

最新のコードベースと最近のコミットから、以下の機能は実装済みです。

- [x] **基本的なゲームフレームワーク**
    - [x] Python + TCODによる基本的なウィンドウ表示
    - [x] ゲームループの実装
    - [x] 状態ベースのゲーム管理（メニュー、ゲーム、ゲームオーバー）
    - [x] ウィンドウリサイズ対応
- [x] **プレイヤーキャラクター**
    - [x] マップ上の移動 (viキー, カーソルキー, テンキー)
    - [x] プレイヤーステータス管理（HP、攻撃力、防御力、レベル、経験値）
    - [x] 満腹度システム
    - [x] レベルアップシステム
- [x] **ダンジョン**
    - [x] オリジナルRogue風の3x3グリッドベース生成
    - [x] 部屋と通路の適切な接続
    - [x] 「gone rooms」（通路のみのセル）の実装
    - [x] 秘密の扉の配置
    - [x] 階段（上り・下り）の配置
    - [x] 特別な部屋（宝物庫、実験室など）
- [x] **モンスター**
    - [x] モンスターの配置とスポーン管理
    - [x] モンスターの表現 (A-Z)
    - [x] 基本的なAI（プレイヤーを追跡）
    - [x] 階層に応じたモンスター種類の調整
- [x] **戦闘**
    - [x] ターンベースの戦闘システム
    - [x] パーマデス（永続的な死）システム
    - [x] 装備による攻撃力・防御力ボーナス
    - [x] 経験値獲得システム
- [x] **アイテム**
    - [x] アイテムはすべて識別済み
    - [x] **アイテム拾い機能**
        - [x] 自動アイテム拾い（移動時に自動回収）
        - [x] 手動アイテム拾い（Gキー）
        - [x] インベントリ満杯時の適切な処理
        - [x] スタック可能アイテムの自動スタック処理
    - [x] アイテムの種類（武器、防具、ポーション、巻物、食料、指輪、金貨）
    - [x] アイテムの色分け表示
    - [x] アイテムドロップ機能
- [x] **インベントリ・装備システム**
    - [x] インベントリ画面（iキー）
    - [x] 装備システム（武器、防具、指輪）
    - [x] アイテムの使用（ポーション、巻物、食料）
    - [x] 装備の脱着
    - [x] 装備による能力値ボーナス
- [x] **UI/画面システム**
    - [x] タイトル画面（ASCIIアート付き）
    - [x] ゲームオーバー画面（統計表示付き）
    - [x] メッセージログシステム
    - [x] プレイヤーステータス表示
    - [x] FOV（視界）システム
- [x] **フロア管理システム**
    - [x] 階段での昇降機能
    - [x] 各フロアの状態保存
    - [x] フロア間の移動
    - [x] 探索済みエリアの記録
- [x] **扉システム**
    - [x] 通常の扉（開閉機能）
    - [x] 隠し扉（探索機能）
    - [x] 扉の状態管理
- [x] **セーブ/ロード機能**
    - [x] ゲーム状態の保存（Ctrl+S）
    - [x] ゲーム状態の復元（Ctrl+L）
    - [x] セーブファイルの管理
    - [x] プレイヤー、インベントリ、フロア状態の完全な永続化
- [x] **開発環境**
    - [x] uv による依存関係管理
    - [x] Makefile による開発タスク自動化
    - [x] 型チェック（mypy）
    - [x] フォーマッター（ruff）
    - [x] テスト環境の構築

## 進行中 (In Progress)

現在部分的に実装されている機能：

- [ ] **アイテム効果システム**
    - [x] アイテム効果のフレームワーク
    - [x] ポーション効果の具体的実装
    - [ ] 巻物効果の具体的実装
    - [ ] 食料効果の具体的実装
- [ ] **ゲームクリア処理**
    - [x] イェンダーのアミュレット検出
    - [x] 勝利画面の実装
    - [x] エンディングメッセージ
    - [x] 最終スコア表示

## 未実装 (TODO)

### 優先度：高
- [ ] **アイテム効果の具体的実装**
    - [x] 回復ポーション（HP回復）
    - [x] 毒ポーション（ダメージ）
    - [x] 力のポーション（攻撃力上昇）
    - [x] 魔法の巻物（テレポート、識別、エンチャント等）
    - [x] 食料の栄養価効果
- [ ] **ゲームクリア処理の完成**
    - [x] 勝利画面の実装
    - [x] エンディングメッセージ
    - [x] 最終スコア表示

### 優先度：中
- [ ] **ステータス異常システム**
    - [ ] 毒状態
    - [ ] 麻痺状態
    - [ ] 混乱状態
    - [ ] 状態異常の視覚表示
- [ ] **魔法システム**
    - [ ] 呪文詠唱
    - [ ] マジックポイント（MP）
    - [ ] 魔法の巻物の効果
- [ ] **トラップシステム**
    - [ ] 落とし穴
    - [ ] 毒の針
    - [ ] テレポートトラップ
    - [ ] トラップの発見・解除
- [ ] **NPCシステム**
    - [ ] 商人NPC
    - [ ] 会話システム
    - [ ] アイテム売買

### 優先度：低
- [ ] **ゲーム拡張要素**
    - [ ] クエストシステム
    - [ ] 複数のダンジョン
    - [ ] キャラクタークラス選択
    - [ ] スキルシステム
- [ ] **コンテンツ追加**
    - [ ] 未識別アイテムシステム
    - [ ] 呪われたアイテム
    - [ ] ユニークアイテム/アーティファクト
    - [ ] ボスモンスター
- [ ] **UI/UX改善**
    - [ ] キーバインドのカスタマイズ
    - [ ] グラフィカルタイル表示
    - [ ] 音響効果
    - [ ] より詳細なヘルプシステム

## 技術的な課題

- [ ] **コード品質向上**
    - [ ] 通路生成アルゴリズムの改善
    - [ ] コードの整理とリファクタリング
    - [ ] ドキュメンテーションの充実
    - [ ] テストカバレッジの向上

## 現在の開発状況

PyRogueは**基本的なローグライクゲームとしての核となる機能がほぼ完成**しています。

**次の優先タスク**：
1. アイテム効果の具体的実装（ポーション、巻物、食料）
2. ゲームクリア処理の完成
3. ステータス異常システムの実装

これらの機能を完了すれば、**完全にプレイ可能で楽しめるローグライクゲーム**として完成します。
